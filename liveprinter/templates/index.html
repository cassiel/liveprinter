<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <!-- Required meta tags -->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>Livecoding G Code Test Form</title>
    <link rel="stylesheet" href="{{ static_url("liveprinter.css") }}" type="text/css">
    <link rel="stylesheet" href="{{ static_url("lib/codemirror/codemirror.css") }}" type="text/css">
</head>
<body>
    <div class="container" id="body">
        <div class="row"><div class="lines"></div></div>
        <div class="row">
            <div class="col-8 col-md-8" id="input">
                <div class="box intro">
                    <form action="/a/message/new" method="post" id="gcodeform">
                        <p><textarea id="gcode_input" name="gcode" placeholder="" style="width:500px">
// run gcode directly in a function
// this will only work once - to persist functions use the "lp" object
function doMove(x,y)
{
	var gtokens = ["G92"];
    gtokens.push("X"+x); gtokens.push("Y"+y);
    gcode(gtokens.join(" "));
}

// ex: a global function
lp.movex = x => gcode("G92 X" + x);

// use the API to move to a spot
// lp is the liveprinter object (x,y,z,e, layerHeight and move/print functions)
lp.moveto(10,10,0.2);

//turn on hot end to 190C
gcode("M104 S190");

//check temp (see console)
gcode("M105");

// extrude some plastic!
lp.extrude(10,100,0.2);
                        </textarea></p>
                        <p>
                            <div class="container" id="buttons">
                            <div class="row">
                                <div class="col-4">CODE MODE</div>
                                <div class="col-2"><input type="button" id="stepButton" value="{{ _("step") }}"></div>
                                <div class="col-2"><input type="button" id="runButton" value="{{ _("run") }}" accesskey="s"></div>
                                <div class="col-6" id="errors" style="background-color:lawngreen"></div>
                            </div>
                            </div>
                        </p>

                        <!-- <p><input type="submit" value="{{ _("send") }}" accesskey="s"></p> -->
                        <p><input type="hidden" name="next" value="{{ request.path }}"></p>
                        {% module xsrf_form_html() %}
                        <p>Highlight lines of code and hit <kbd>Control</kbd>-<kbd>Enter</kbd> to send them</p>
                    </form>
                    <div class="panel-l"></div>
                    <div class="panel-b-l"></div>
                </div>

                <!-- end input-->
            </div>
            <div class="col-4 col-md-4">
                <div id="inbox" class="box">
                    
                </div>
                <div id="info" class="box">
                    
                    <div class="panel-r lines"></div>
                    <div class="panel-b-r"></div>
                </div>
            </div>
            <!-- end 1st row -->
        </div>
        <!-- end main container-->
    </div>

    <!-- Bootstrap 4 -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"
            integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
            crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script src="{{ static_url("lib/codemirror/codemirror.js") }}"></script>
    <script src="{{ static_url("lib/addon/selection/active-line.js") }}"></script>
    <!-- modified JS-Interpreter from https://github.com/NeilFraser/JS-Interpreter -->
    <script src="{{ static_url("lib/js_interpreter/interpreter.js") }}"></script>
    <script src="{{ static_url("lib/js_interpreter/acorn.js") }}"></script>
    <!-- liveprinter javascript -->
    <script src="{{ static_url("liveprinter.js") }}" type="text/javascript"></script>

</body>
</html>
